<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Routing with Categories</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Leaflet Routing Machine CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <style>
    #map { height: 100vh; width: 100%; }
    #categoryFilter {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      padding: 6px 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      cursor: pointer;
    }
    button {
      margin-top: 5px;
      padding: 4px 8px;
      font-size: 13px;
      cursor: pointer;
    }
  </style>
</head>
<nav class="relative bg-white-800/50 after:pointer-events-none after:absolute after:inset-x-0 after:bottom-0 after:h-px after:bg-white/10">
  <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
    <div class="relative flex h-16 items-center justify-between">
      <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
        <!-- Mobile menu button-->
        <button type="button" command="--toggle" commandfor="mobile-menu" class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-white/5 hover:text-white focus:outline-2 focus:-outline-offset-1 focus:outline-indigo-500">
          <span class="absolute -inset-0.5"></span>
          <span class="sr-only">Open main menu</span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6 in-aria-expanded:hidden">
            <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6 not-in-aria-expanded:hidden">
            <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
      <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
        <div class="flex shrink-0 items-center">
          <img src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500" alt="Your Company" class="h-8 w-auto" />
        </div>
        <div class="hidden sm:ml-6 sm:block">
          <div class="flex space-x-4">
            <!-- Current: "bg-gray-950/50 text-white", Default: "text-gray-300 hover:bg-white/5 hover:text-white" -->
            <a href="home.html" aria-current="page" class="rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white">Home</a>
            
          </div>
        </div>
      </div>
      <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
        

        <!-- Profile dropdown -->
        <el-dropdown class="relative ml-3">
          <button class="relative flex rounded-full focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">
            <span class="absolute -inset-1.5"></span>
            <span class="sr-only">Open user menu</span>
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDqZLNNtpV-cNZfqbScWb3_Ny0C15rPO9mgg&s" alt="" class="size-8 rounded-full bg-gray-800 outline -outline-offset-1 outline-white/10" />
          </button>

          
        </el-dropdown>
      </div>
    </div>
  </div>

  <el-disclosure id="mobile-menu" hidden class="block sm:hidden">
    <div class="space-y-1 px-2 pt-2 pb-3">
      <!-- Current: "bg-gray-950/50 text-white", Default: "text-gray-300 hover:bg-white/5 hover:text-white" -->
      <a href="home.html" aria-current="page" class="block rounded-md bg-gray-950/50 px-3 py-2 text-base font-medium text-white">Home</a>

    </div>
  </el-disclosure>
</nav>

<body>
  <!-- Dropdown filter -->
  <select id="categoryFilter">
    <option value="all">Show All</option>
  </select>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Leaflet Routing Machine JS -->
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

  <script>
    var map = L.map('map').setView([42.6754, 21.2110], 14);

    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    var current_position, current_accuracy;
    var routingControl = null;
    let firstLocation = true;

    // Categories with destinations
    const categories = {
      "ğŸ•Pizza": [
        { name: "Pizza Crust", lat: 42.65244897157923, lng: 21.17176212807544, desc: "Ketu eshte Pizza Crust <br> Vleresimet 4.5 - 5 yje <br> Ale S thot Restoranti i bukur ka shumÃ« mundÃ«si pÃ«r pica, sanduiÃ§, makarona dhe shumÃ« ushqime tÃ« kÃ«ndshme dhe tÃ« shijshme." },
        { name: "Napoli Pizza", lat: 42.653479732786735, lng: 21.16771501628135, desc: "Ketu eshte Napoli Pizza <br> Vleresimet 4.5 - 5 yje <br>Anyle Zogu thot NjÃ« nga picabÃ«rÃ«sit mÃ« tÃ« mirÃ« tÃ« PrishtinÃ«s. Kopshti i tyre Ã«shtÃ« gjithashtu i bukur sidomos gjatÃ« orÃ«s sÃ« artÃ«." },
        { name: "Jana", lat: 42.66292783115419, lng: 21.161553744131684, desc: "Ketu eshte Jana Napolitana <br> Vleresimet 4.8 - 5 yje <br>Diella Sejfijaj thot Ky lokal ofron njÃ« ambient tÃ« dekoruar me shumÃ« shije dhe kujdes, duke krijuar njÃ« atmosferÃ« tÃ« ngrohtÃ« dhe familjare. Stafi Ã«shtÃ« jashtÃ«zakonisht mikpritÃ«s, duke e bÃ«rÃ« eksperiencÃ«n akoma mÃ« tÃ« kÃ«ndshme." },
        { name: "Ruds Pizza", lat: 42.66050732833732, lng: 21.161825886478464, desc: "Ketu eshte Ruds Pizza <br> Vleresimet 4.6 - 5 yje <br> Kastriot Mucolli thot Pica e tyre Ã«shtÃ« tepÃ«r e shijshme, me njÃ« kore krokante por tÃ« butÃ«, salcÃ« tÃ« pasur domatesh dhe sasinÃ« e duhur tÃ« djathit." },
        { name: "Sos Pizza", lat: 42.651026823391724, lng: 21.168499103734533, desc: "Ketu eshte Sos Pizza <br> Vleresimet 4.8 - 5 yje <br> Bleona Bullatovci thot Shkova kÃ«tu me tÃ« gjithÃ« miqtÃ« e mi pÃ«r darkÃ« dhe patÃ«m picat mÃ« tÃ« mira absolutisht ndonjÃ«herÃ«!! E rekomandoj patjeter!! â¤ï¸10/10.." },
      ],
      "ğŸ”Hamburger": [
        { name: "Aba", lat: 42.6495931071088, lng: 21.157716800469704, desc: "Juicy handmade burgers." },
         { name: "Route 66 (Kalabria)", lat: 42.64530452935157, lng: 21.155673527375953, desc: "Juicy handmade burgers." }, 
         { name: "Route 66", lat: 42.64846796734142, lng: 21.16848153027561, desc: "Juicy handmade burgers." }, 
         { name: "Buffalo", lat: 42.66121376069884, lng: 21.16092697354637, desc: "Juicy handmade burgers." }, 
         { name: "Smash Burger", lat: 42.65757062695122, lng: 21.151709027685673, desc: "Juicy handmade burgers." }, 
         { name: "Shaban Grill House", lat: 42.66328284322778, lng: 21.163768238683343, desc: "Juicy handmade burgers." }, 
         
      ],
      "ğŸItalian": [
        { name: "Napoli", lat: 42.65327465931177, lng: 21.16764192026882, desc: "Anyle Zogu thot ShÃ«rbim i shpejtÃ« dhe efikas, ambient komod dhe i rehatshÃ«m, ushqim i mirÃ« dhe Ã§mime shumÃ« tÃ« arsyeshme. Do ta rekomandoja pÃ«r Ã§do udhÃ«tar nÃ« KosovÃ«." },
        { name: "SETTE-Ristorante Italiano", lat: 42.6580731391406, lng: 21.166656956444875, desc: "Era Ahmeti thot Ushqim, ambient dhe shÃ«rbim i mrekullueshÃ«m. NjÃ« nga restorantet mÃ« tÃ« mira italiane nÃ« PrishtinÃ«." },
        { name: "Ponte Vecchio", lat: 42.66434685415317, lng: 21.15938891553721, desc: "Blerta Haxha thot Restoranti mÃ« komod familjar nÃ« qytet. Ushqimi Ã«shtÃ« aq i shijshÃ«m dhe jo shumÃ« i shtrenjtÃ«. Provoni lasagna, makarona ponte (e preferuara ime) dhe tiramisu." },
        { name: "La Napoletana", lat: 42.656035778513825, lng: 21.175143053395796, desc: "Kaltrina Zylfiu thot Home Pica bÃ«n pica vÃ«rtet tÃ« mira nÃ« stilin Napoletana! Korja Ã«shtÃ« e lehtÃ« dhe krokante, dhe mbushjet shijojnÃ« super tÃ« freskÃ«t. MÃ« pÃ«lqeu veÃ§anÃ«risht vaji pikant - ai i shtoi picÃ«s vetÃ«m goditjen e duhur." },
        { name: "Restaurant Trattoria", lat: 42.64850207720944, lng: 21.171007998102567, desc: "Ketu eshte Restaurant Trattoria <br> Vleresimet 4.6 - 5 yje <br> Arben Mehani thot Kalova njÃ« kohÃ« tÃ« mrekullueshme nÃ« Trattoria! Bifteku i viÃ§it ishte absolutisht i shijshÃ«m - i butÃ«, i shijshÃ«m dhe i gatuar nÃ« pÃ«rsosmÃ«ri. NjÃ« atmosferÃ« komode dhe staf miqÃ«sor." },
        { name: "Vapiano", lat: 42.658653731872185, lng: 21.15500649763883, desc: "Ketu eshte Vapiano <br> Vleresimet 4.5 - 5 yje <br> Nora Uka thot  Ushqimi ishte absolutisht i lezetshÃ«m, me pÃ«rbÃ«rÃ«s tÃ« freskÃ«t dhe shije tÃ« pasura qÃ« e bÃ«nin Ã§do pjatÃ« njÃ« kÃ«naqÃ«si tÃ« kuzhinÃ«s. Nga makaronat e gatuara nÃ« mÃ«nyrÃ« perfekte deri te sallatat e shijshme tÃ« freskÃ«ta." }
      ],
      "ğŸ¥™Greek": [
        { name: "Trock Taverna", lat: 42.66184666155505, lng: 21.154231161087417, desc: "Ketu eshte Trock Taverna <br> Vleresimet 4.7 - 5 yje <br> Agon Gjonbalaj thot Absolutisht ushqimi mÃ« i mirÃ« qÃ« kam shijuar ndonjÃ«herÃ« nÃ« njÃ« tavernÃ«. Shije, shÃ«rbim dhe atmosferÃ« fantastike. ShumÃ« e rekomanduar!." },
        { name: "Baba Ganoush Meze", lat: 42.65936927110693, lng: 21.159702867145086, desc: "Ketu eshte Baba Ganoush Meze <br> Vleresimet 4.8 - 5  yje <br> Fisnik Namlixhiu thot Ushqimi Ã«shtÃ« thjesht super i mirÃ«. GjithÃ§ka Ã«shtÃ« e freskÃ«t, e shijshme dhe e bÃ«rÃ« me kujdes tÃ« vÃ«rtetÃ«. Por dip karrota e pjekur? Kjo Ã«shtÃ« zhytja mÃ« e mirÃ« qÃ« kam pasur ndonjÃ«herÃ«. Krem, pak i tymosur, pak i Ã«mbÃ«l, aq fjalÃ« pÃ«r fjalÃ« perfekt." },
        { name: "Gagi Restaurant", lat: 42.6635813816616, lng: 21.162249957004892, desc: "Ketu eshte Gagi Restaurant <br> Vleresimet 4.5 - 5 yje <br> Nita D thot UnÃ« porosita pica Gagi, dhe ishte thjesht e mahnitshme! Si fillim, gjithashtu u kÃ«naqa: shije tÃ« shijshme dhe produkte me freski tÃ« patÃ«metÃ«. Stafi Ã«shtÃ« mikpritÃ«s, i buzÃ«qeshur dhe vÃ«rtet i vÃ«mendshÃ«m." },
      ],
      "ğŸ½ï¸Tradicionale": [
        
      { name: "Albanezi Restaurant", lat: 42.66272685109351, lng: 21.162894627352706, desc: "Ketu eshte Alabnezi Restaurant <br> Vleresimet 4.9 - 5 yje <br> Lirian Ramadani thot Restorant i mrekullueshÃ«m. Kishte biftek si dhe kÃ«rpudhat dhe tÃ« dyja ishin fantastike! ShÃ«rbimi ishte gjithashtu super miqÃ«sor dhe Ã§mimi absolutisht i drejtÃ«." },
      { name: "Tiffany", lat: 42.66420925376755, lng: 21.15779241254816, desc: "Ketu eshte Tiffany <br> Vleresimet 4.3 - 5 yje <br> Ermal Hasimaj Ushqim tradicional i shijshÃ«m. ShÃ«rbim i shkÃ«lqyer. NjÃ« ndalesÃ« e rregullt pÃ«r mua sa herÃ« qÃ« vij nÃ« Prishtina." },
      { name: "Shpija e Vjeter", lat: 42.66189675700115, lng: 21.16365067323063, desc: "Ketu eshte Shpija e Vjeter <br> Vleresimet 4.2 - 5 yje <br> Valdet S thot NjÃ« vend perfekt pÃ«r tÃ« ngrÃ«nÃ« dhe pÃ«r tÃ« shijuar shoqÃ«ri tÃ« mirÃ«. Provoni biftekun e mbushur. Ishte i shijshÃ«m dhe porcioni ishte i duhuri." }
      ],
      "ğŸŒ®Meksikane": [
        { name: "Mexicana", lat: 42.661204234436234, lng: 21.160461695577766, desc: "Tacos and burritos." },
        { name: "Comandante Marcos", lat: 42.65842667177384, lng: 21.14750149111432, desc: "Tacos and burritos." },
        { name: "Eat Mucho", lat: 42.661950873905205, lng: 21.160258050636724, desc: "Tacos and burritos." },
      ],
      "ğŸ¥©Steakhouse": [
        { name: "Lisa's Restaurant", lat: 42.664316500225105, lng: 21.159984141189742, desc: "Ketu eshte Lisas Restaurant <br> Vleresimet 4.7 - 5 yje <br> Hasan Kllokoqi thot Lokacion shume i mire, ne qender te Prishtines. ShÃ«rbim shumÃ« miqÃ«sor dhe i dobishÃ«m qÃ« mÃ« bÃ«n shumÃ« tÃ« lehtÃ« zgjedhjen e vaktit. Ushqimi Ã«shtÃ« i freskÃ«t dhe shumÃ« i shijshÃ«m." },
        { name: "Master Steakhouse", lat: 42.671125609524076, lng: 21.194274462437463, desc: "Ketu eshte Master Steakhouse <br> Vleresimet 4.6 - 5 yje <br> Besart Recani thot Sinqerisht, gjithÃ§ka rreth Masterit ishte nÃ« vend. Atmosfera ishte e stilit tÃ« lartÃ«, por e ftohtÃ«, ushqimi ishte i jashtÃ«zakonshÃ«m - njÃ« nga biftekÃ«t mÃ« tÃ« mirÃ« qÃ« kam pasur ndonjÃ«herÃ«." },
        { name: "Sarajeva Steakhouse", lat: 42.66226208644534, lng: 21.16218743268379, desc: "Ketu eshte Sarajeva SteakHouse <br> Vleresimet 4.5 - 5 yje <br> Liridona G thot Vend shumÃ« i bukur dhe elegant, staf i shkÃ«lqyer dhe miqÃ«sor, si dhe ushqim fantastik!." },
        { name: "Restaurant Freskia", lat: 42.67221570018321, lng: 21.219102968653218, desc: "Ketu eshte Restaurant Freskia <br> Vleresimet 4.4 - 5 yje <br> Redon Ymeri thot vend i mrekullueshÃ«m pÃ«r tÃ« ardhur me familjen ia vlen dhe njÃ« natyrÃ« dhe kafe vÃ«rtet e mrekullueshme Ã«shtÃ« e mahnitshme." },
        { name: "Ramazzoti", lat: 42.65035231967197, lng: 21.158815662074307, desc: "Ketu eshte Ramazzoti <br> Vleresimet 4.8 - 5 yje <br> Egzon Potoku thot E adhuroj kÃ«tÃ« restorant! Ã‡mimet janÃ« perfekte, ushqimi Ã«shtÃ« i shijshÃ«m dhe stafi Ã«shtÃ« jashtÃ«zakonisht miqÃ«sor." },
        { name: "Villa Germia", lat: 42.669488244401435, lng: 21.218743552276937, desc: "Ketu eshte Vila Germia <br> Vleresimet 4.4 - 5 yje <br> Besnik Avdija thot NjÃ« nga restorantet mÃ« tÃ« mirÃ« tÃ« vendosur nÃ« PrishtinÃ«. Ã‹shtÃ« 5 minuta me makinÃ« nga qendra e qytetit ose 15 minuta me autobusin nr. 4. Me njÃ« pozicion tÃ« shkÃ«lqyeshÃ«m nÃ« fund tÃ« luginÃ«s sÃ« vogÃ«l tÃ« parkut tÃ« GÃ«rmisÃ«." },
        
      ]
    };

    // Store markers by category
    const categoryMarkers = {};

    // Function to route to a clicked destination
    function routeToDestination(destinationLatLng, destinationName) {
      if (!current_position) {
        alert("Your location is not detected yet!");
        return;
      }

      // Remove previous route
      if (routingControl) {
        map.removeControl(routingControl);
      }

      routingControl = L.Routing.control({
        waypoints: [
          current_position.getLatLng(),
          destinationLatLng
        ],
        routeWhileDragging: false,
        showAlternatives: false,
        draggableWaypoints: false,
        addWaypoints: false
      }).addTo(map);
    }

    // Place destination markers with popups
    Object.entries(categories).forEach(([category, places]) => {
      categoryMarkers[category] = [];

      // Add category to dropdown
      const option = document.createElement("option");
      option.value = category;
      option.textContent = category;
      document.getElementById("categoryFilter").appendChild(option);

      places.forEach(dest => {
        const marker = L.marker([dest.lat, dest.lng]);

        const popupContent = `
          <b>${category} - ${dest.name}</b><br>
          ${dest.desc}<br>
          <button onclick="routeToDestination(L.latLng(${dest.lat}, ${dest.lng}), '${dest.name}')">
            Route here
          </button>
        `;

        marker.bindPopup(popupContent);
        marker.addTo(map);

        categoryMarkers[category].push(marker);
      });
    });

    // Handle dropdown filter
    document.getElementById("categoryFilter").addEventListener("change", function() {
      const selected = this.value;

      // Hide all markers first
      Object.values(categoryMarkers).forEach(markers => {
        markers.forEach(m => map.removeLayer(m));
      });

      // Show only selected category
      if (selected === "all") {
        Object.values(categoryMarkers).forEach(markers => {
          markers.forEach(m => m.addTo(map));
        });
      } else {
        categoryMarkers[selected].forEach(m => m.addTo(map));
      }
    });

    // Handle user location
    function onLocationFound(e) {
      if (current_position) {
        map.removeLayer(current_position);
        map.removeLayer(current_accuracy);
      }

      var radius = e.accuracy / 2;

      current_position = L.marker(e.latlng).addTo(map)
        .bindPopup("You are here!").openPopup();

      current_accuracy = L.circle(e.latlng, radius).addTo(map);

      if (firstLocation) {
        map.setView(e.latlng, 14);
        firstLocation = false;
      }
    }

    function onLocationError(e) {
      alert(e.message);
    }

    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);

    function locate() {
      map.locate({setView: false, maxZoom: 14});
    }

    setInterval(locate, 10000); // Update location every 3 seconds
  </script>
</body>
</html>
